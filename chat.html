<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Rathor™ Lattice — Chat ⚡️</title>
  <link rel="manifest" href="/manifest.json"/>
  <link rel="icon" href="/icons/thunder-192.png" type="image/png"/>
  <link rel="stylesheet" href="/css/main.css"/>
</head>
<body>
  <div id="chat-container">
    <!-- chat header, messages, input area, grok-bridges as before -->

    <!-- Voice Settings Modal -->
    <div id="voice-settings-overlay" class="modal-overlay">
      <div id="voice-settings-modal" class="modal-content">
        <h2 data-i18n="actions.voiceSettings">Voice Settings</h2>

        <label for="input-lang" data-i18n="voice.inputLang">Input Language (Recognition):</label>
        <select id="input-lang">
          <option value="auto" data-i18n="voice.auto">Auto-detect (browser preference)</option>
          <!-- populated dynamically if needed -->
        </select>

        <label for="output-lang" data-i18n="voice.outputLang">Output Language (Synthesis):</label>
        <select id="output-lang">
          <option value="auto" data-i18n="voice.auto">Auto-detect (browser preference)</option>
          <!-- populated dynamically if needed -->
        </select>

        <div class="slider-container">
          <label for="voice-pitch">Pitch (0.5–2.0):</label>
          <input type="range" id="voice-pitch" min="0.5" max="2.0" step="0.1" value="1.0">
          <span id="pitch-value">1.0</span>
        </div>

        <div class="slider-container">
          <label for="voice-rate">Rate (0.5–2.0):</label>
          <input type="range" id="voice-rate" min="0.5" max="2.0" step="0.1" value="1.0">
          <span id="rate-value">1.0</span>
        </div>

        <div class="slider-container">
          <label for="voice-volume">Voice Volume (Rathor speech):</label>
          <input type="range" id="voice-volume" min="0.0" max="1.0" step="0.1" value="1.0">
          <span id="voice-volume-value">1.0</span>
        </div>

        <div class="slider-container">
          <label for="feedback-volume">Feedback Volume (beeps & pulses):</label>
          <input type="range" id="feedback-volume" min="0.0" max="1.0" step="0.1" value="0.6">
          <span id="feedback-volume-value">0.6</span>
        </div>

        <label for="voice-voice">Voice:</label>
        <select id="voice-voice">
          <option value="">Loading voices...</option>
        </select>

        <div id="voice-feedback-toggle">
          <input type="checkbox" id="feedback-sounds" checked>
          <label for="feedback-sounds" data-i18n="actions.feedbackSounds">Play feedback sounds</label>
        </div>

        <div id="tts-toggle">
          <input type="checkbox" id="tts-enabled" checked>
          <label for="tts-enabled" data-i18n="actions.ttsEnabled">Enable Rathor speech (offline TTS)</label>
        </div>

        <button id="voice-test-btn" data-i18n="actions.testVoice">Test Voice & Sounds ⚡️</button>

        <div class="modal-buttons">
          <button id="voice-cancel" data-i18n="actions.cancel">Cancel</button>
          <button id="voice-save" data-i18n="actions.saveApply">Save & Apply</button>
        </div>
      </div>
    </div>

    <!-- all other modals, toasts, overlays remain as before -->

    <script src="/js/common.js"></script>
    <script src="/js/chat.js"></script>
    <script src="src/storage/rathor-indexeddb.js"></script>
    <script src="src/voice/offline-voice-recorder.js"></script>
  </body>
</html>        <option value="en-US">English (US)</option>
        <option value="en-GB">English (UK)</option>
        <option value="es-ES">Español (España)</option>
        <option value="fr-FR">Français (France)</option>
        <option value="de-DE">Deutsch (Deutschland)</option>
        <option value="it-IT">Italiano (Italia)</option>
        <option value="ja-JP">日本語</option>
        <option value="zh-CN">中文 (简体)</option>
      </select>

      <label for="output-lang" data-i18n="voice.outputLang">Output Language (Synthesis):</label>
      <select id="output-lang">
        <option value="auto" data-i18n="voice.auto">Auto-detect (browser preference)</option>
        <option value="en-US">English (US)</option>
        <option value="en-GB">English (UK)</option>
        <option value="es-ES">Español</option>
        <option value="fr-FR">Français</option>
        <option value="de-DE">Deutsch</option>
        <option value="it-IT">Italiano</option>
        <option value="ja-JP">日本語</option>
        <option value="zh-CN">中文</option>
      </select>

      <div class="slider-container">
        <label for="voice-pitch">Pitch (0.5–2.0):</label>
        <input type="range" id="voice-pitch" min="0.5" max="2.0" step="0.1" value="1.0">
        <span id="pitch-value">1.0</span>
      </div>

      <div class="slider-container">
        <label for="voice-rate">Rate (0.5–2.0):</label>
        <input type="range" id="voice-rate" min="0.5" max="2.0" step="0.1" value="1.0">
        <span id="rate-value">1.0</span>
      </div>

      <div class="slider-container">
        <label for="voice-volume">Voice Volume (Rathor speech):</label>
        <input type="range" id="voice-volume" min="0.0" max="1.0" step="0.1" value="1.0">
        <span id="voice-volume-value">1.0</span>
      </div>

      <div class="slider-container">
        <label for="feedback-volume">Feedback Volume (beeps & pulses):</label>
        <input type="range" id="feedback-volume" min="0.0" max="1.0" step="0.1" value="0.6">
        <span id="feedback-volume-value">0.6</span>
      </div>

      <label for="voice-voice">Voice:</label>
      <select id="voice-voice"></select>

      <div id="voice-feedback-toggle">
        <input type="checkbox" id="feedback-sounds" checked>
        <label for="feedback-sounds" data-i18n="actions.feedbackSounds">Play feedback sounds</label>
      </div>

      <div id="tts-toggle">
        <input type="checkbox" id="tts-enabled" checked>
        <label for="tts-enabled" data-i18n="actions.ttsEnabled">Enable Rathor speech (offline TTS)</label>
      </div>

      <button id="voice-test-btn" data-i18n="actions.testVoice">Test Voice & Sounds Lightning</button>

      <div class="modal-buttons">
        <button id="voice-cancel" data-i18n="actions.cancel">Cancel</button>
        <button id="voice-save" data-i18n="actions.saveApply">Save & Apply</button>
      </div>
    </div>
  </div>

  <!-- Edit Modal, Delete Modal, Bridge Health Modal, Toasts, etc. as in the raw pull above -->
  <!-- (truncated here for brevity, but full in repo) -->

  <script src="/js/common.js"></script>
  <script src="/js/chat.js"></script>
  <script src="src/storage/rathor-indexeddb.js"></script>
  <script src="src/voice/offline-voice-recorder.js"></script>
</body>
</html>        <option value="en-US">English (US)</option>
        <option value="en-GB">English (UK)</option>
        <option value="es-ES">Español (España)</option>
        <option value="fr-FR">Français (France)</option>
        <option value="de-DE">Deutsch (Deutschland)</option>
        <option value="it-IT">Italiano (Italia)</option>
        <option value="ja-JP">日本語</option>
        <option value="zh-CN">中文 (简体)</option>
      </select>

      <label for="output-lang" data-i18n="voice.outputLang">Output Language (Synthesis):</label>
      <select id="output-lang">
        <option value="auto" data-i18n="voice.auto">Auto-detect (browser preference)</option>
        <option value="en-US">English (US)</option>
        <option value="en-GB">English (UK)</option>
        <option value="es-ES">Español</option>
        <option value="fr-FR">Français</option>
        <option value="de-DE">Deutsch</option>
        <option value="it-IT">Italiano</option>
        <option value="ja-JP">日本語</option>
        <option value="zh-CN">中文</option>
      </select>

      <div class="slider-container">
        <label for="voice-pitch">Pitch (0.5–2.0):</label>
        <input type="range" id="voice-pitch" min="0.5" max="2.0" step="0.1" value="1.0">
        <span id="pitch-value">1.0</span>
      </div>

      <div class="slider-container">
        <label for="voice-rate">Rate (0.5–2.0):</label>
        <input type="range" id="voice-rate" min="0.5" max="2.0" step="0.1" value="1.0">
        <span id="rate-value">1.0</span>
      </div>

      <div class="slider-container">
        <label for="voice-volume">Voice Volume (Rathor speech):</label>
        <input type="range" id="voice-volume" min="0.0" max="1.0" step="0.1" value="1.0">
        <span id="voice-volume-value">1.0</span>
      </div>

      <div class="slider-container">
        <label for="feedback-volume">Feedback Volume (beeps & pulses):</label>
        <input type="range" id="feedback-volume" min="0.0" max="1.0" step="0.1" value="0.6">
        <span id="feedback-volume-value">0.6</span>
      </div>

      <label for="voice-voice">Voice:</label>
      <select id="voice-voice"></select>

      <div id="voice-feedback-toggle">
        <input type="checkbox" id="feedback-sounds" checked>
        <label for="feedback-sounds" data-i18n="actions.feedbackSounds">Play feedback sounds</label>
      </div>

      <div id="tts-toggle">
        <input type="checkbox" id="tts-enabled" checked>
        <label for="tts-enabled" data-i18n="actions.ttsEnabled">Enable Rathor speech (offline TTS)</label>
      </div>

      <button id="voice-test-btn" data-i18n="actions.testVoice">Test Voice & Sounds ⚡️</button>

      <div class="modal-buttons">
        <button id="voice-cancel" data-i18n="actions.cancel">Cancel</button>
        <button id="voice-save" data-i18n="actions.saveApply">Save & Apply</button>
      </div>
    </div>
  </div>

  <!-- Edit Modal -->
  <div id="edit-modal-overlay" class="modal-overlay">
    <div id="edit-modal" class="modal-content">
      <h2 data-i18n="actions.editCurrent">Edit Session</h2>
      <label for="edit-name">Session Name:</label>
      <input type="text" id="edit-name" maxlength="50">
      <label for="edit-description">Description (optional):</label>
      <textarea id="edit-description" rows="3" maxlength="200"></textarea>
      <label for="edit-tags">Tags (comma separated):</label>
      <div id="edit-tags-container">
        <input type="text" id="edit-tags" placeholder="work,ideas,urgent,personal">
        <div id="tag-suggestions"></div>
      </div>
      <div id="tag-preview" class="tag-preview"></div>
      <label>Color Tag:</label>
      <div class="color-presets">
        <div class="color-preset" data-color="#ffaa00" style="background:#ffaa00;"></div>
        <div class="color-preset" data-color="#88ffdd" style="background:#88ffdd;"></div>
        <div class="color-preset" data-color="#ff6666" style="background:#ff6666;"></div>
        <div class="color-preset" data-color="#aa88ff" style="background:#aa88ff;"></div>
        <div class="color-preset" data-color="#44ccff" style="background:#44ccff;"></div>
      </div>
      <div class="modal-buttons">
        <button id="modal-cancel" data-i18n="actions.cancel">Cancel</button>
        <button id="modal-save" data-i18n="actions.saveApply">Save Changes</button>
      </div>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div id="delete-modal-overlay" class="modal-overlay">
    <div id="delete-modal" class="modal-content">
      <h2 data-i18n="actions.deleteCurrent">Delete Session</h2>
      <p data-i18n="status.deleteConfirm">Are you sure you want to permanently delete this session?</p>
      <p class="warning" id="delete-warning" data-i18n="status.deleteWarning">This action cannot be undone. All messages and metadata will be erased from the lattice.</p>
      <div class="modal-buttons">
        <button id="delete-cancel" data-i18n="actions.cancel">Cancel</button>
        <button id="delete-confirm">Delete Permanently</button>
      </div>
    </div>
  </div>

  <!-- Bridge Health History Modal -->
  <div id="bridge-health-overlay" class="modal-overlay">
    <div id="bridge-health-modal" class="modal-content">
      <h2 data-i18n="status.bridgeHealth">Bridge Health Chronicle</h2>
      <div id="bridge-health-content">
        <p data-i18n="status.loading">Loading bridge health history...</p>
      </div>
      <div class="action-buttons">
        <button id="bridge-health-close" data-i18n="actions.close">Close</button>
      </div>
    </div>
  </div>

  <!-- Import Toast -->
  <div id="import-toast" data-i18n="status.importSuccess">Session imported successfully ⚡️</div>

  <!-- Install Prompt Toast -->
  <div id="install-toast">
    <button id="install-btn">Add Rathor™ to Home Screen ⚡️</button>
    <button id="dismiss-install">×</button>
  </div>

  <!-- Update Prompt Toast -->
  <div id="update-toast">
    <button id="update-btn">New version available — Update now ⚡️</button>
    <button id="dismiss-update">×</button>
  </div>

  <input type="file" id="import-file-input" accept=".json" style="display:none;">

  <script src="/js/common.js"></script>
  <script src="/js/chat.js"></script>
  <script src="src/storage/rathor-indexeddb.js"></script>
  <script src="src/voice/offline-voice-recorder.js"></script>
</body>
</html>
