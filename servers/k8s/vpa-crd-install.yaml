# Install Vertical Pod Autoscaler CRDs & components
# Official source: https://github.com/kubernetes/autoscaler/tree/master/vertical-pod-autoscaler
# Run once: kubectl apply -f https://github.com/kubernetes/autoscaler/raw/master/vertical-pod-autoscaler/deploy/vpa-v1-crd.yaml

# Minimal version (for reference):
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: verticalpodautoscalers.autoscaling.k8s.io
spec:
  group: autoscaling.k8s.io
  versions:
  - name: v1
    served: true
    storage: true
    schema:
      openAPIV3Schema:
        type: object
        properties:
          spec:
            type: object
            properties:
              targetRef:
                type: object
                required: [apiVersion, kind, name]
                properties:
                  apiVersion: {type: string}
                  kind: {type: string}
                  name: {type: string}
              updatePolicy:
                type: object
                properties:
                  updateMode: {type: string, enum: [Auto, Recreate, Off]}
              resourcePolicy:
                type: object
                properties:
                  containerPolicies:
                    type: array
                    items:
                      type: object
                      properties:
                        containerName: {type: string}
                        minAllowed: {type: object}
                        maxAllowed: {type: object}
                        mode: {type: string}
          status:
            type: object
            properties:
              recommendation:
                type: object
                properties:
                  containerRecommendations:
                    type: array
                    items:
                      type: object
                      properties:
                        containerName: {type: string}
                        lowerBound: {type: object}
                        upperBound: {type: object}
                        target: {type: object}
